---
interface Props {
  text: string;
  url?: string;
  style?: 'primary' | 'secondary' | 'outline';
  size?: 'small' | 'medium' | 'large';
  action?: 'link' | 'form' | 'modal';
  disabled?: boolean;
  className?: string;
}

const {
  text,
  url = '#',
  style = 'primary',
  size = 'medium',
  action = 'link',
  disabled = false,
  className = ''
} = Astro.props;

// Auto-detect if it's really a link based on URL
const hasValidUrl = url && url !== '#' && !url.startsWith('javascript:');
const isRealLink = action === 'link' && hasValidUrl;

const isExternal = url?.startsWith('http');
const target = isExternal ? '_blank' : undefined;
const rel = isExternal ? 'noopener noreferrer' : undefined;

const classes = `btn btn-${style} btn-${size} ${disabled ? 'btn-disabled' : ''} ${className}`;
---

{isRealLink ? (
  <a
    href={url}
    class={classes}
    target={target}
    rel={rel}
    aria-disabled={disabled}
  >
    {text}
  </a>
) : (
  <button
    type={action === 'form' ? 'submit' : 'button'}
    class={classes}
    disabled={disabled}
    onclick={action === 'modal' ? `window.open('${url}', '_blank')` : undefined}
  >
    {text}
  </button>
)}

<style>
  .btn {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 500;
    text-align: center;
    transition: all 0.2s ease;
    cursor: pointer;
    border: 2px solid transparent;
    background: none;
    font-family: inherit;
    font-size: inherit;
  }
  
  .btn-primary {
    background: #007bff;
    color: white;
  }
  
  .btn-primary:hover {
    background: #0056b3;
  }
  
  .btn-secondary {
    background: #6c757d;
    color: white;
  }
  
  .btn-secondary:hover {
    background: #545b62;
  }
  
  .btn-outline {
    background: transparent;
    color: #007bff;
    border-color: #007bff;
  }
  
  .btn-outline:hover {
    background: #007bff;
    color: white;
  }
  
  .btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
  }
  
  .btn-medium {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
  }
  
  .btn-large {
    padding: 1rem 2rem;
    font-size: 1.125rem;
  }
  
  .btn-disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  .btn:focus {
    outline: 2px solid #007bff;
    outline-offset: 2px;
  }
</style>