---
interface Props {
  text: string;
  url?: string;
  style?: 'primary' | 'secondary' | 'outline';
  size?: 'small' | 'medium' | 'large';
  action?: 'link' | 'form' | 'modal';
  disabled?: boolean;
  className?: string;
}

const {
  text,
  url = '#',
  style = 'primary',
  size = 'medium',
  action = 'link',
  disabled = false,
  className = ''
} = Astro.props;

// Auto-detect if it's really a link based on URL
const hasValidUrl = url && url !== '#' && !url.startsWith('javascript:');
const isRealLink = action === 'link' && hasValidUrl;

const isExternal = url?.startsWith('http');
const target = isExternal ? '_blank' : undefined;
const rel = isExternal ? 'noopener noreferrer' : undefined;

const classes = `btn btn-${style} btn-${size} ${disabled ? 'btn-disabled' : ''} ${className}`;
---

{isRealLink ? (
  <a
    href={url}
    class={classes}
    target={target}
    rel={rel}
    aria-disabled={disabled}
  >
    {text}
  </a>
) : (
  <button
    type={action === 'form' ? 'submit' : 'button'}
    class={classes}
    disabled={disabled}
    onclick={action === 'modal' ? `window.open('${url}', '_blank')` : undefined}
  >
    {text}
  </button>
)}

<!--
  Styles for buttons are now centralized in /src/styles/global.css
  This ensures consistency across the site and uses design tokens.
  Button classes available: .btn, .btn-primary, .btn-secondary, .btn-ghost
-->